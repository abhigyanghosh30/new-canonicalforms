"use strict";(()=>{var D=function(e,t){var o=null;return function(){var n=this,s=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(n,s)},t)}},w=D;var i=document.querySelector(".p-navigation--sliding, .p-navigation--reduced"),c=document.querySelector(".p-navigation.is-secondary"),d=document.querySelector(".js-show-nav > .js-dropdown-list"),N=document.querySelectorAll(".js-dropdown-button"),k=i.querySelectorAll(".js-dropdown-list");function l(e){e||(e=d),e.classList.contains("js-dropdown-list")||(e=e.querySelector(".js-dropdown-list")),k.forEach(function(o){o.querySelectorAll("ul > li .js-focus-target").forEach(function(s){s.setAttribute("tabindex","-1")})}),e&&e.querySelectorAll("li").forEach(function(o){var n;o.parentNode===e&&((n=o.querySelector(".js-focus-target"))==null||n.setAttribute("tabindex","0"))})}function h(e){e.key==="Escape"?g(e):e.shiftKey&&e.key==="Tab"?F(e):e.key==="Tab"?P(e):e.key==="Enter"&&G(e)}function F(e){let t=document.activeElement,o=y(t);U(o,t)&&g(e)}function P(e){let t=document.activeElement,o=y(t),n=H(o,t),s=j(o);n&&!s&&g(e)}function G(e){let t=y(e.target);if(j(t)){let n=e.target.getAttribute("aria-controls");document.querySelector(`.js-dropdown-window #${n}`).querySelector("a").focus()}}function g(e){e.preventDefault();let t=d.querySelector(".is-active > a");t==null||t.focus(),r()}function j(e){if(e)return e.classList.contains("js-tabs")}function y(e){return e.closest(".js-tabs")||e.closest(".js-content-panel")||e.closest(".js-dropdown-window")}function b(e){e.key==="Escape"?I(e):e.key==="Tab"&&R(e)}function R(e){let t=document.activeElement,o=t.closest(".js-dropdown-list");if(o){let n=o.querySelectorAll(":scope > li:has(.js-focus-target)"),s=n[n.length-1].querySelector(".js-focus-target"),a=n[n.length-1]===t;if(s===t){let u=n[0].querySelector(".js-focus-target");e.preventDefault(),u.focus()}}}function I(e){r()}function L(e){e.key==="Escape"&&I()}function H(e,t){if(e){let o=e.querySelectorAll("a");return o[o.length-1]===t}}function U(e,t){if(e)return e.querySelector("a")===t}function q(e){if(e.type==="submit"){let t=e.closest("form");t?t.submit():console.error("No form found to submit")}else if(e.type==="reset"){let t=e.closest("form");t?t.reset():console.error("No form found to reset")}else V()}function V(){let e=i.classList.contains("has-search-open");r(),e||z()}function x(){var t;document.querySelector(".js-search-button").removeAttribute("aria-pressed"),i.classList.remove("has-search-open"),(t=c)==null||t.classList.remove("has-search-open"),document.removeEventListener("keydown",L)}function z(){var o;let e=document.querySelector(".js-search-button"),t=i.querySelector(".p-search-box__input");e.setAttribute("aria-pressed","true"),(o=c)==null||o.classList.add("has-search-open"),i.classList.add("has-search-open"),t.focus(),document.addEventListener("keydown",L)}function B(e){let t=document.querySelector(".js-secondary-menu-toggle-button");t==null||t.addEventListener("click",J)}function J(e){e.preventDefault(),c.classList.contains("has-menu-open")?m():(r(),Q())}function m(){var e;(e=c)==null||e.classList.remove("has-menu-open")}function Q(){c.classList.add("has-menu-open")}B(c);function T(){let e=i.classList.contains("has-menu-open");r(),e||(X(),i.addEventListener("keydown",b))}function X(){i.classList.add("has-menu-open"),l(d)}function W(){i.classList.remove("has-menu-open"),i.removeEventListener("keydown",b)}function K(e){let t=e.closest(".p-navigation__dropdown");t.setAttribute("aria-hidden","true"),e.closest(".is-active").classList.remove("is-active"),e.closest(".is-active").classList.remove("is-active"),l(t.parentNode.parentNode)}function M(e,t){e.forEach(o=>{i.querySelectorAll(`[data-id="${o.slug}"]`).forEach(s=>{s.innerText=`${o.count} roles`,s.classList.add("u-animation--slide-from-top")})})}function Y(){let e=new Worker("/static/js/navigation/careers/Worker_populate-careers.js");e.postMessage(""),e.onmessage=function(t){M(t.data)}}function Z(){fetch("/careers/roles.json").then(e=>e.json()).then(e=>{M(e)}).catch(e=>{console.error(`Unable to load careers navigation roles: ${e}`)})}function A(){window.Worker?Y():Z()}function E(){e("#products-nav","canonical.com-nav-products"),e("#solutions-nav","canonical.com-nav-solutions"),e("#partners-nav","canonical.com-nav-partners"),e("#careers-nav","canonical.com-nav-careers"),e("#company-nav","canonical.com-nav-careers");function e(o,n){var s=document.querySelector(o);s&&s.querySelectorAll("a").forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"GAEvent",eventCategory:n,eventAction:`from:${origin} to:${a.href}`,eventLabel:a.text,eventValue:void 0})})})}t("#main-content");function t(o){var n=document.querySelector(o);n&&n.querySelectorAll("a").forEach(function(s){s.href.startsWith("#")||s.addEventListener("click",function(){setTimeout(()=>{var u=window.location.href.split("#"),f=u[0],S=window.location.href;if(s.className.includes("p-button--positive"))var v="canonical.com-content-cta-0";else if(s.className.includes("p-button"))var v="canonical.com-content-cta-1";else{var v="canonical.com-content-link";f=origin,S=s.href}dataLayer.push({event:"GAEvent",eventCategory:v,eventAction:`from:${f} to:${S}`,eventLabel:s.text,eventValue:void 0})},500)})})}}var ee=100;i.addEventListener("click",e=>{e.preventDefault();let t=e.target.closest("a, button");if(t)t.matches(".js-dropdown-button")?te(t):t.matches(".js-search-button")?q(t):t.matches(".js-menu-button")?T():t.matches(".js-back-button")?K(t):t.closest("a")&&(window.location.href=t.closest("a").href||"/");else return});var _=document.querySelector(".js-search-overlay");_&&_.addEventListener("click",p);document.addEventListener("click",function(e){let t=e.target;t.closest&&(t.closest(".p-navigation--sliding, .p-navigation--reduced, .p-navigation.is-secondary")||p())});function te(e){let t=document.getElementById(e.getAttribute("aria-controls"));t&&(t.parentNode.closest(".p-navigation__dropdown")||O(t),t.getAttribute("aria-hidden")==="true"?(oe(e,t,!i.classList.contains("has-menu-open")),i.classList.add("has-menu-open"),i.addEventListener("keydown",h)):(C(e,t,!0),l(),i.classList.remove("has-menu-open"),i.removeEventListener("keydown",h)))}var O=e=>{N.forEach(function(t){let o=document.getElementById(t.getAttribute("aria-controls"));!o||o===e||C(t,o)})},C=(e,t,o=!1)=>{let n=()=>{e.parentNode.classList.remove("is-active"),e.parentNode.parentNode.classList.remove("is-active"),t.setAttribute("aria-hidden","true")};t.classList.add("is-collapsed"),o?setTimeout(n,ee):n()},oe=(e,t,o=!1)=>{e.closest(".js-dropdown-list").classList.add("is-active"),t.setAttribute("aria-hidden","false"),t.classList.contains("js-dropdown-list")?t.classList.add("is-active"):e.parentNode.classList.add("is-active"),o?requestAnimationFrame(()=>{t.classList.remove("is-collapsed")}):t.classList.remove("is-collapsed"),l(t)};i.querySelectorAll(".js-navigation-tab").forEach(e=>{e.addEventListener("click",ne)});function ne(e){e.preventDefault(),e.stopPropagation();let t=e.target.getAttribute("aria-controls"),o=document.querySelector(`.js-dropdown-window #${t}`),n=e.target.closest(".js-dropdown-window");n.querySelectorAll(".p-side-navigation__link").forEach(a=>{let u=a.getAttribute("aria-controls"),f=n.querySelector(`#${u}`);u===t?(o.removeAttribute("hidden"),a.setAttribute("aria-selected",!0),a.classList.add("is-active")):(f.setAttribute("hidden",!0),a.setAttribute("aria-selected",!1),a.classList.remove("is-active"))})}function p({exception:e}={}){let t={search:x,"secondary-navigation":m,"main-toggles":O,menu:W,"set-focus":l};for(let o in t)o!==e&&t[o]()}var $=window.innerWidth;window.addEventListener("resize",w(function(){let e=window.innerWidth;e!==$&&(p(),$=e)},10));A();E();var r=p;})();
//# sourceMappingURL=navigation.js.map
